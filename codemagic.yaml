# Automatically generated on 2020-06-16 UTC from https://codemagic.io/app/5ee912bbed34a921a214116d/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      vars:
        FCI_KEYSTORE_FILE: Encrypted(Z0FBQUFBQmU2UlRzLTViTTFPZmhBWGxkaUs5cjE5Qmd0S0ZtYllIOVdjT0NMb2xaa2ZGUzh4Y2lCV2o0dXdiUWZyaU5tR2R5bHZORGd2UXFNY1ktbkt6TjJ6MWhUalRBdkVnVWN3VUxYSGJJRDlVN2FYcHo0MVgxLTA0bVhsRUJEQ19zQXE4THozTGhOWDVLa09BUUZWTmJhRURfSlc1Wnp1TzFCVmNERThiWHR2bzE1c2VrNUFHazdZZTdEYm5WUm1TNF9mV0Y3anJOdnRnRkZpaWNIaHpfWXJjZzRvdXljWThRR2FOZ2U3dmZOOXJjcUpYdWJTSTJ6VFljdlliam1tb2lXZ1lKUXB0aDFhdTV3cWppclh5Wm5IRnVUZ1dtWFRCdkFWd2ZYdlpTZmVJUHNta0hNQTZkaVQ0Vy1IZ29nV0U4OWl1bzRIVlRhS2dyMjctV1l2WGtBOHluUmlJSTRRMVlTVFNWM0NDY2NxS2gyQVdaeTFpdldFa0swaGJ1WE9IY1ZYSndnODZHZHVWeEZGVmtVNEYxRVFZazE5cDVNbmVTN2EzYUlnY0hpSkVBNkZud25BQ1U1WDZyN1ZreXlIaEVYaGNaa05PVWl3dlhnWEZkVVQ2dFNUZTRodzB0dkJ1RFZxaDljd0VDLVEwWEtISFZ5QmY1VzZiZFFEZU10a2xfRmJxM0ZGYlVZNUF2UmVaVmNwN1RpaHNRcmh4V3lKZUpkdnlQSFVneWMxRTk5aFFoOGZXT0ZXOGRSTFdPSWQyd1VzYUMzM21jbUpTMjBBbll1SDRJd1l0N2hFeGdEeVlfUjFhZ1FIWHRlS25WcW9zREFCaW9raE9RMmQ3V1NjX3dtNVExRWM3bjBPUTRqbjdSdmJ2elFaalo4Rkhpd08yUllMNWQwREZibFFzaFZLY05SUHFXUGpXVXZmZmVlRFlUTEhkMEp5WmQzcFZ5R1Q4T3RqU1gweEE5UlJyQWJ4RUdfODMwSzVVVkdoSkpMX0hIMFFUaGtZVHM5bVBrRlByOHZhSDRzb2RWaURMcXl6RHFsMkdrbE9lZm9XNUFHQ0ZEZEg2ek1jV1NfY3VPTmNfNFpQN1VnNDRnUThJUXEwdUZEM3QxVTVVWVR5akhZcTMyWmpQS0pta291ZjFxV3dadnM1UjlsS2dBcUk4d2xBcmMybmdYaDdhcHF5Y3ZFSFUzY3ZQanR4c0tyOFlOSlBoY3N5TlNwYXFOd3duWVljSVFXWk93NGJBaVptS2lfWDBoZ3B5Wk92enRJSUlTemJMdHVvY1FDTUNnVGVPbmxNY0ZCOTRDZ2FiX1JwazhtMmhSUlhZazY4ZTN5QUNvQjIwNFZKeVRyWVk2NURrSENkRm1hQThIb0dpeVFGTzJ3T0V0VFlDNkpQUmJEMng0NklXT1hJc0YyZHJCak0tUmZNcE5UYkFlNThMYllPU3BvMmNoeG5uRTEtaVo1c0hPS0l2QzlVVVFVVENMdHZvSVBCUEtQNlFGb3NHQjA5WDJzVUVWVGVsd2J5ZzlQejhMVnpkcVN2SjZzdDJEVXc4T3U2QXV5UjBzQ2o1dWZGTEFEaENKeVhfWTFmcnpSdW0xRUgzYi1tR1VjMlZYYS1HcEFXRUJ5U19vdnd3dXk0Qk1saDhsNWxzWmo2ZlE3VG85OG5ad0VpaEpZbEJBRTF0cER0dFFteXAxUENHcnZPZHB6VW5pcW40NVZrRmlOWnY4RzBYN090am1LVW56aGl2U0JFNFhydHFrd1Bsa084WmxJeU5MMlhsMTM3UU12U1EtbGE5S3NQY1JoVE1nVjY4ckpMTVRXTF9HV0Q0RDBDVWxOWXNJNlM0ZjNPZ0stRDdvbTR2b1ZlOVZYX1FnYm1DVDdjUHV0QVZfZThRMVQ3S3lValJlU0hNanpkT3Y5NlhEWExHWDM0enhCT0VDM2I1U3VZR0d0RmJRWmlnQURXNUtxUFQzVXdtLWxXWGdYQl9SQTVwa0Z6T3V4ZFU1clhfM1VlOGhBZkNKTkZNYmhBaEF1VmU5QlhLX0hndURzY3pfaUtnLU9fbHVKWkVKLU5qS1lDNVk5bnhBX00xSDJKazlRd09xMnh1aVRxN2xPeWZzcm1OTmV6V0pRLUZVWjZEQUJjTE9adHhxOWZCWU4tTXgtUHQ4SWRuTXktSGRJMUo5THNSUUtsOE5QY3owQzBEajVZQXJDQ0NUaUhNSno3aXItYU5xV3E2X25mb1I5V29xcFRFVEw3U3VQRXJxejVWVkF0MkFsNW5xSmt4LVU4QnFmd3p6T0tQVENYd0t3azFoQmJkdWJTSnMta24yX21uMy1KcGRVZnZpcmRCUjFrUk1VQ3VNMTFwbXBtRjkwamc1UjZNUTZXRzkzazF1RW9nS3hwTG9PWDBQbkdlMEN5TmtVcWU3OEZVWTJiLWVxbFhuOXA3SkFBbDRiWF9CVGlYR2Z1TXlaTXJjY1M2eVNNSDVSa1RCVDY2b1E5SFJqM1BTODBmUG5HbDJVY3ZFa1g5QUFLWGlDV2V5TVgtMDhBVWFTZk1rS1BlUjRYUDQ1Zl9YR1MtMDF3V3oxcS1BaW9nZUtTdElhZlFNX1liUnZ4SjBiMU5PeG4yblJCMnZwZGQzZVJqeUh3OWtBTV96NWFUa29PWG5RMUVsbFU2WWZUem5TQnZ4Y0hTMDVkSk02Y1UwRFd6U0FWRU10eENBaFcxVjVvc3BMUUlHWEFMS0lYeVJCV1lRMHdqWThpMnVyRUNzWl9TdFdrSzJNaVNDZVQtd0NheUo5a2JZdVJ0SjdWS2dFWjg0Q1U2Q2ZaMXhiTGpqM0tCemVMU1dndGVrV21oanpoY3NqNlRFQWFzNHNubWRTN2tlX2JHYlRrSVI4RjNHbGFlaHdHSWhsQ3N4bEl1REJLS0llWEVyOENhdjkwNnV3NmMyLWNiX2daYWxFRFo0TEMteVhxdm9CcjRlaW5JX1NXa2ZRUVhoTWozLWthVFFEV1RMT1o0aUhzcEpLZlpDTTNGRXc5Vjdsa0Y1WS1vRkI4cGpfaEFUSmdKclFxWWpYNGp5Y3NaRHZBRVFQTWRMRjRHRVZ4bGRnMFR3VGRlVm9aeVBaRXpWMnQ5WHkyOVhHc0FOeWRVQ0hmOW5UUTNZUDlWUHlyQi04Tlg0bDJ0YWk5YzZkVkN1S2N6eFdpamFVbEd5a2pOYWViVlA4Uy1jdXVZVWdtSVFSLVRlQmFkdm5HUk95SGktb1c2bjVDcnEzb0dhWThaZTN5SnJnUE5lZzJ3RDV5ek9JVUQybmNHeDNTRGVqM1BxSnlSMTVyZWZWVy1mTDdBdGE2OVFSUzFDcHRxTm5FYy13NGQ3dTFzZHl4ZXhUUlVTckloN2pud1AzQTIwcHJsRE1GZXlNSTZuZFZSTGJpQURFN0hnME5sVTdoeFpNbjRHcThCYmd3RElGMkRBeWdCQ3VKdktwTVgwaTNJQ3BDNUYyX28xUDZmVGR0TVJXNUJzeHczZlBaOF8tcEdyTVJtcnlPOUJHUW51b19OcmRzNVlzeWtlT1lkZ2FhdjdBTjBubVRrb0dGTkZja3JqWW1WYmJVNGRIckYzb3Y4ZklpX2xiWXZmNUtMN1Z6YjlfVTBjNkJDbjFadXVzNFJZQzJYZ3hNN0hZVjlIUDNyLThuS2xOelgyc0pkaU1taGV1SW5pM3pTVFk1V0t2b21HUWZBaVVqTmN6MXhUbmRKb2tiN2RMUmx5WEg5UGxpMjJBMkFaSHdzNGRmS1JiTksxQXhRNXo0dFBlaGtKcXZVSWJEX0lfMG9rdTN4MDhvN3A3R3UzdkZiVVRaVUhxWmdJd2hVakMxRERlQzJ2cUVGcmFJRFFQNFliYXlVT2NIVVV3alBHVzdFNFRKbnJuUkdyem9MX01pNXFueTdRcE9pdG5rOW1HSHpZQV9tVUN0MTFicTdyMDJXZTFaVVJXOWVxMTBDMkpvUVp6VGNjekZBbnQ5TUVtZnpEbGNZTERDOGhTVndqcGVYcFYwY01QcWNiTXFZTExGT3dNZ3JTS2k2OXVRMTIyX040cHh2R0E3aW1sWTZZRzBqako1dndvQ3E1YUVZWDlCLXkzVGdVZDByWW0tZ2xHMUVPWjhTNmxYdFZ6dEpXZUlxTzJOTzJQRFpXaVU5d25mUS1TMWQ2TXp4NFI5UzEzclBrRjlpMEVNelc3ZXVHN2x1YUNxSWk1dzhERTBkbDg3LWN2cGdvOEJ6d05odmtTaEdYalV4a1V5N0dnUzlkSjhaWEppUlNsak1Ka0dyZktVUHFLX1VXX19zOERzSGtoaXhhcFhmX1BJZ080SDRmUnlDNjZIZk1mNTZ2YUdIenBEYURkMi1nNGVta0tqa2VVbVRHTk1tMzRFejd0dm5acVdvTkdwb3ByZFVkMlVBaFVBZkl4WEVvRjNKcFVtdGhCbnZleGlJemlaY0RQcTREbnN3TnNfYnNOalFSV3ZTU3JPejN4MGtOa0xJT21TOGR2WU12c0RRRS1EZndWMHgwakoyZU1MOXRKSWhTRzlPTGc1cnJVc2pKZ1JZamwtYllrbzZvWXhTbmV3ZlZTRURjV1hXQkNydkRrOHkyb1NPVXZCaW43QkNKR2l2VXRqelc5dnlYZ0ZEU214MGJuYW9Rel8zemF6WWJiRVNpWHpSVUFuaXExTExRT0gtYU9LMDI0Rk4wcFlBVWg3eWM2NkZMVkZpVFFaNlJKLUVTNnk1WWtFbmtLN1BaX2JFcmpjU3JJZ0EtcmpMZlMySWtCbkUxNzJ4ZHM3VXRWMzFJelVhSFJXc1daVEN2Q1VPWktTS0lSR2NTWXN2YVFwU2o2NXM2YzllY1BPWEo4aVFlekdXN3hUYllNVjlnbE1iUEUyRUg1MUZOMFlmbVpQR2EtVGh5eEpseHkzbVJjOC01MmZoZTY2ZFVPcWRaakYxY2F3Y21Fdi1yOWhGaG5PdE4zNFAyU1ZkX205MUctOVJwaFl0Qm9Md25pZ2hGbzRYR1FobndGMi1JYWNiYlZCOF9feVphNC1CTC1QMmh1WGV3SUMtYnFrR3RFQktUUzdJTERPU28ydWtGLUdfcGNPd3BHOG4xRExtWmV3djBDYnpBcEhQSEFPN19iZThXaVJNSHZOWGkwakM3TUg1SnV0VnFYdkJqTEhSZDA4c3Rrdmc3NmNwSnZHbldCRUNWMmlTUElPN0M4RmdLMWdsNFRCLWFMRjh2bzluZk95U3BpU3lOT1g3MGVQdmRIc2Q2SWpDTU1tMnpBTjRGbTNfcWw4a2dnRkZVMlc5bnpLUDk2TGY4UWNVSURSbWhuZk83SDRiYTNLWG40MlEzVXk1cHpGVF93dFJJQ2N6cjJRTVpyVHdsY2sxaWV1TWhDNlNpU3J3a0NIZ2tjeWhJX1paNE5PRHFLLVNoTXQzbFA4QUZMNHlDamhqWGpydjkweXFtcTYyQlF2dm9qWWhrVDN3THdaX0REaDRzZlNMa0hDbGhsaEc3VkdHUGhPa0loOFV1ZlEzMEFUQUtjNU1zOS1wcnJERkhlSGM9)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmU2UlRzbGtXTGxZTllVVW9Fa2xxcWlqdlFvenpRTUZYNW1GTlNDZ21VSzR0UTR2TkR2U0ZUR3MwQTBfZWc5bjR2MURQSGc5TXNFcF9ZMDk4djl6Sk1vX0FDM3RLczctYzlMdHVKcEdqUU8xTFAxSFE9)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmU2UlRzMllrOXVKNjR4RC1qMnNuTUEyRUNITG5GU3Y1SXlmOHJGelJkbmdkUzlNNWRqTzV4RjFDaVVBUkllejlmZ29RNGVFLUhWdUZHTHlWNTNnNGJPUTFTb3RRVFNKdzJ0YmRfU0hpd2JodmFXNkE9)
        FCI_KEY_ALIAS: assistantScrapMechanic
        CM_KEYSTORE: Encrypted(Z0FBQUFBQmU2UlRzUVNvWWxVSld0R2czWXVDTE9uLWVlUzNDMkxTWkFpWEdheVhrSmgzRElJUkxTZlJoNHdDaWc3aTc0UTZqdV90NFh3a2lVNDl2VUU3MGhRWFZPVUo2R2czYXhNallXdENRbmswTmwxUTJKbXJpQnVUXzJjMTdQODR2ZXRwWEpXRVBpc0daT3AtcDRuS2YzSmVKdU9KMGt4eVBIU3I4UDZsakY0ei1adGRpOWNJQ2MxV2xmNWg1TG51eldYUnlHMVc4ZC1MWURXNFhpWmdQS2ZYOXp3M3lscnpTYklIZUNaZy1JLWVZQW9JakVhanprWm1GZWNnUXJ6YTVsM2JzZDNnTTByZFlOeW16OE1HNUczbDlGR0hBV2Q2OUgxbDRseVdBaWVmOFY3S3dkWFJIRFZuS2s1TnJVTWNOSGI5MUF6MEtzWHlDS29pbWszVUY4Vy1OSE1iZ1FuU1BybnJod1NOQTB6QXFUdk5yd2p3YkZ5ZkhqR3lJT0QwSm44NTgtRUM0eFBOVjY1MXozUGJWcjR1MDF3UU1qSXpGcmo3eFNvVWRvTkJEQ1IzNWptREZvVW94Z3ZEVjN3Sm1wYy1Gam5PVjFETjMwcU9kUkpNRHZ6bHVkbkJ2X2QtY2FWZThIdUJ0NS1pQWlzdWEzazlpOWh3cXY3MXhURlRmZU5hR0YwdmNFdFRHQjJwSzdDb2VZdzZsT1dQUklteVhMUExlbjg3cWxNU2tET0hCRzJaMW1TUzhUd0ppeXRUT25hQ01wRzNHYjNpck4zQlVhNFU4VS02bVpMclZ1U2M1QzFlZjViT0wzeFQtZjYtRUVIRVduMERnb0x0RURYVkpYcGlwWmpPRjdLYU5ZQWxNMDd5bUpTcnhpZHJyeU5IVXdiYmZsWldMNjBZZFoyaTZScHdDTERYQm9pWkxHNV9OSzdnbXllby1pdmVkSk94Sml5RjFCVWxicU42WHpPOHZiOERZWDNDOWJabFZPUUthOHdVaDEtdVE2VW5uZDBkVWZ4dUNZMzFSMHVtclMwcDlUbnludXB4UEQyTFBaNHo0NTlVelJrNnJNMlVublRLMUxkWXpNMUV0QWgxeTQ4Z3o4Q2RIRHhpenQ5U2VKd0dwOXB5d2NiZkJTMG1ielA1Y0ZTYjhEOEUwV01nMVA1ek1vQkFJdUNBX1NHTDhTUHFQSHUwNGVXZ1Q0S3huaGQxb0taMndqd0RzWWRfUFBfd0F2NE9mMHBLRS1JU0pZSTExS2h3YmVydklQSjlMWngwVjdUNV9QUG1qOWtybDhWMDh3ODJyT3Q1ZnR0X2ZtdWkzcEVPWm9WR1NFU2lhc3ZmVzdXUHFucjZvNnplaGFxWjlzVU5tdmRyN3ptcmlBVlgya3U2OGlCckdscUVWTU16b2lvQVZfTU9TRHVDT1ZTSkwya0NiME9YSUdOMXJjSWhjNm82VFFCdnZBTEY2bXk1V2lxaDR3OUg3YkFqUWxrQVRRRldtUmo2eld1SHZ6ZmxhWHFjUG5kVndxRmlPQTVTbDIydGQ4UXo4NWlhdXVseDV6eDE3Y21mdXIwdGJCS1g2NlN3dXgxbGxQVGxPQ3dNb3hoMDB0T3E5ZmdfNjFpYVNLYVpfV19sUWU5ci1faHdWZ3RGQ19NQi1sei00QlZ6OTd6THlIV3I2TTNNVTV3a1FDMFBXX1J2d0JHR2U0MXQ1a1NPenVUWFNlVXo3RWNGU29sb2pfbGRqcGFfVXRfUmw0M1BWSkNIQ2V4bGZZSmF6OWtSbDhUTVI1TEM3VEFXRy1XRndsSkJfTm9sbHBTMzFsWE92dEpqcEFXSlNqVzJOa1NzMUVPVkdWWmhibElUbU0yaWFGSW5aX01KMVhsSVhPTEFGWkRyZFN0LVJfYzlhLXJUb2FoTFBuajBTanZ2MTZwRHNyQ2t2NjZRZnJELWlGVkc3bERzdkdoSE10dGJ4bEdDeXNUZjZrMU5pVklrZjAtUlJ0eTRyOFZSZkNqU1dWSVZ5M2YteEtUQ01DQWxsRkVES2R2NUpZVjM2Y084LWVlQUhPUVhLcXUyS0YyLTJrUW9QVXFycEM0TTVwblN1bTZzZk5qMG5aVE9id3NleTQxMFhYQkp2WS1naUVEX3haQS1ReUVzdVBRLWFLOXE2QlNjSS1kYVlrWkJvbUpwclpsbkhWdHdkM2Zsb0lxVlZBRnRlZ2gzMnpsZXVDTFlkMk4wb1IxRFBfQ3JkX0lGMS1qMTZYY09HRE1uTWRJaEJobG45YnBySjEtRU9OcUU3WWpLTWRMUE95Q2E5WHNxb1hEcHNyUUJqdVZJNm1BbzZPcVZ5NXpCc2tmamU3NWd1cklIdHF0OElJSm02SFU5X2c2RUxuQXotc2liLUxqRHl0c0oyb1dwY09hNDJpR2FMM2RTcjBUMmxLOGUtY3JBNlRNWHliSXlxaXFuTmRlNlgtNUI0MGRkdVVjMnNQQUlaZ1pfTTBYODlIeklUMDlpWmNiMlpmWlFtZk16MkdYVEh6T1lZekUzXzZjRnFEODFrLXFsdGJzWDFDSVJjLVhzMmV6SE1zUDJrRmpKVUowNG5fekpGQjlZMWNkYkk5aW55MVJ6TXlyU1dzR3ExcnJDTG83X0V2ZVh2YzFISXhYSi1zeUVNbXIzeEZlT2xQd0thT29WS0VZdlo3TVduNEdGZ2xzSWFIdENHT1NwWnR4eFB0ZWxyMWp4cHBpd0dUS1JXRjRNMkpMNUNweTdPRDc2eTlRdHNCczlHaWtvYXBYR3VXdTRiM3duY0hfeGk0LXV0OWpWQXIzNHVsYmpET2tDc1Y3NmlqN1VDc3Y0QXFLaXVGTmhoTjZsUDJvRWlPb0ZqbnFDeWkzZmR0N3lJQnI2WGN2OVFwc3R4NjJHckFHbVhQY0d5cHVkTkhSenhSY3ZFTzVJb0F0aVVxazlwSXV5eC1fMFVmMnZSTE1zX1RPSGhNZE1BM25iTFM4dHZkV2cyVkZFQWFQRnBDSlZZMlhiMVZIZnJ3bXZHWnIwRzM0ZURlak1aejNKMGEtOGI5YUlBamdHc2hicnc3SEFiRWRlSjZuRko2WUstQkM1X281TXl1U05waGxpNm44Nm95VVBBWFdFeEZ0dkc1NzUwV05iSTdxZTdBTFdiS3dYSlh0V1d0SGtiTFpzZllmeFNHaHIxQmJZNWl0VWt2NG9mMzdKYmhJQ0lwMHhGRU9ia3BNWmczenFsR1VsTFhNRm56TmtVTEhucWhkVl81VTJ0REYwMEVUREo1TkUyWmoxQnFzOThYQmFaVFJyUTg4dERIVWZPdzk2MkJZZzVrZ1ZrZl8zX1U0emI1aTZpQXlITmlmeUd5SmlTQ0ZjQmZibzF1RHNpTDRjcWlyR25BVWRFM1FpcjlHYTRxMmRfeGJGTnhUWDRHb3MwTW1LMHRFU2EtLW9qRlU2Zmd4TzZIeldnQ2hQRXlCcnRQZ3FBR1cxQ29iUXl4UXVuZWJJb0h5ZndoOUNHQ2h1MG9xdEsyWEVsb0RMekgxVGEta1BHSjhCZWcybDItZWNjOXRkYmR3TjBiQS0zaGNkbUVRNW5ZenRMdGRTUGk4VWY4UnRWbVM4eU14SVY4OElwcWpnektfNGY1RTE5ekd0NkpLY3N4QnJtc2RQU2FPbkFid0ZKa01wSFByMElvWExReVlkdm9Jby1QM2JoaHRmUVhTZFhLS2JJeGNja1BZSHFhdzNuTXJaWktBVW5iMTYwUnV3X2RMTXd5UW9YeEx2NnRabGllb0ZTRzEtVDJZM1Z1RGxpTE9WclljWGd1cjRaODZnSkxsbUZSTWhjWlRXNUNxZFVzTUoxQXRqQUhFQ09uRzZ2ZkpjTGVNM2JWT1dYMW1MeFBOU3MzMmUtQldxRy16cUdnWXFZRmdKRUJQcWhzRGhSQWRQV2RySTVTNGV6bVpwQmkwWjl1dHc3YWMtQ3lLWUxUd3o5bGtMU0h4TXg4STFkaGtyOFlubFNhWEV1T2UzaU51SVJ5TEl2ZWJCWTRQcnl5MDhVeXMyRHBHNnlFM1lCSUNZRGFQSWdLM19KeWlYNV9RXzM2TW00RUdnYlhJQ3ZacHgyWUIydW05TXppaWZlWVNPX3hWeFhiYnF2b245NE01WGN3bTZ1RllLeFdwQjFneXk4LS15RExLWldwWnNORllnenlCZUFCU3hwWlplRzR2OGpROEU1eWxEZExxaWNJbS1rX1Q1bjcycXhfay1xQW9RcEVWX216ZmFtWUxGbnJmM21fbWJpS0psTVVkM1RqZUE5MWU1R21GZ2pQZ1p3ZUthQTlWNVZrS1NKajhJT3JYTkxqbzh3eTVhVXY0ZnI0TlVMTmNKM2k2NWJpWUQ4SHVJaUtZRmJac19QUWJKeXNPbURCX1BrcUtYT182NjFLd0NtWDhKbzc4bDQ3NTJOOUNfMjJ0Z3hPdmZ1MkNDZmZwYjhST3B2QWN2UUtMQUdZWTJoVGJZWVNwbWF0OHU2UnA3UzNiM2hQZUNwRFI2QWJJb01SSmJxY2dtUG5EbjNPWXRsNzBlZnRCTklOQTFua3Z2VEhNM1JGRFRnTS1tZzE4YUNvWWFIa0dTV3luSXRmU291OV95ZkJIMFE4Mm9GSGEyZ1lNRFF4eFpmRk1MZk9iRDQyZmtYQzQ0eXdDa180cUJsdGpicFhnU1lwd0pZaEdFNF9jOHNXRllCakhOMkh2TXEyTnpyT1Iyc3Q1V2wtV2NVaUhXUDZtbWJ1UlV5bVFvYUVlSG5zdkhPaFVzOEk3aldtenZQUDh1dWVwdGlVY3dtTkpGWUNxVnN3SFVOZjI3Q1YtcHk4aFBILUtZemxscEpjNnZudlh1Y1pzT3JiVzJEMTZLQmpyQmpyMnc0bnVLeG02T3pDZlNiYU9ETWJZVlFKb1owSkNMQU1CWWdTVmtDbjVIN2p2SlREc3FRQm9mM1hySDFHUV9jWkJmSUtxM3N2MGU1OVkwZXh6dm1mMlp0MHBCcmZ0akpibk5iNVJ6amQyUG5qTnZPQ2E0bXJjTnphakhfb0tpcDZyX0JmSHAzbGJ5YzBOYk53Xy0zendNMmVfcVRaZlpQLXRwUlpieEs4WGhiUDlLbEUwcDRZTFlVSlBGRFNtUVZjeFd3TXdfbndwS2FSUzJIQkFHVEtyS3h5NDc0bUhBQlBXekJjd0RxZTVTSUZNUUtyYWZ4RDd0Z2dDbUVqcTNFYzlRV21SNmdmTlZPeHRnejBPTk14YzlzQVJudnFpZW9zaUFKUTlXWFN1SDBmdnB0M3lCeVFEcm1UVW1SaDRCQUZwempGTktuOF9CR2MtUjRpMXRPMU55LWdUUU5ubkZtUjkxeW9GTTEtTlBjck5VSkV3N3lIUGMtQjYwRjVnelI4Nzh0SGFZaDZGTlB4VjU5Q1lLYUJRZlc5Si1RQ1F1anl1RTZmSmtlQ0tCYVUtUDlrVloyd3VOSEdkY2trQjdsSFNsM29PSUtjbHVuQzVyZUZkcUhsSjYtR2U3TURMT2JsNXJRVWVvai1HazQ1bFE9)
        CM_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmU2UlRzU0VUWFBIbHNZQmZFbHlXT2xvTHhISllRZjQ0RXR2RUYtdDNqdS02NFlseFlNaDAzNTZUbjBxVmVhYmZMbFlsd0ROMjBOS2FNaEJ0cFc5N2VpWjhiLUEtMy11Z1l0eFFLS1UxdmpWeHhJR3c9)
        CM_KEY_ALIAS_PASSWORD: Encrypted(Z0FBQUFBQmU2UlRzNkYzMkp1NFR3X0lZVEZsSnBKUV9BU2pEM1BxbE1WUGtweF9oeUFHOWVmb25HZjFzZHBmdVVteGJ6aEV6YjQ2bHNwaXZfOVY4XzRjUWxweHRMY0JFSG4zZUUtV0dYdUU0YWlVRmFpeTVHLXc9)
        CM_KEY_ALIAS_USERNAME: Encrypted(Z0FBQUFBQmU2UlRzeVpva3RmZExRcXhLVUw2RHJvVjlHZXdTS2laUmFPakRfdHN4dUFxT19lZFdmdjFMQnR0UVpyUXNEOElGcThzQ0otdTNabFZ2MmZjQlc1Z0Ezb2ZpczFhR1k2aFRpSUZ0M19GMS1MSENhT2s9)
      flutter: stable
      xcode: latest
      cocoapods: default
    cache:
      cache_paths: []
    scripts:
      - |
        # set up key.properties
        echo $CM_KEYSTORE | base64 --decode > /tmp/keystore.keystore
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$CM_KEYSTORE_PASSWORD
        keyPassword=$CM_KEY_ALIAS_PASSWORD
        keyAlias=$CM_KEY_ALIAS_USERNAME
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter config --enable-web
      - |
        #!/usr/bin/env sh
        set -e # exit on first failed commandset
        echo $FCI_KEYSTORE_FILE | base64 --decode > $FCI_BUILD_DIR/keystore.jks
      - flutter build appbundle --release -t ./lib/prod.dart
      - |
        # generate signed universal apk with user specified keys
        android-app-bundle build-universal-apk \
          --bundle str(Path(project_file, 'build/**/outputs/**/*.aab')) \
          --ks /tmp/keystore.keystore \
          --ks-pass $CM_KEYSTORE_PASSWORD \
          --ks-key-alias $CM_KEY_ALIAS_USERNAME \
          --key-pass $CM_KEY_ALIAS_PASSWORD
      - find . -name "Podfile" -execdir pod install \;
      - flutter build ios --release --no-codesign
      - |
        # build web
        flutter build web --release -t ./lib/prod.dart
        cd build/web
        7z a -r ../web.zip ./*
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - build/web.zip
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - hi@kurtlourens.com
